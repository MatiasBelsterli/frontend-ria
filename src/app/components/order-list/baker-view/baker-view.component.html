<div class="container">
  <h1 class="title">Order List For Bakers</h1>
  <div *ngIf="orderList.length === 0" class="notification is-info">
    <p>
      It appears that no orders have been placed yet.
    </p>
  </div>
  <table class="table is-striped is-hoverable is-fullwidth" *ngIf="orderList.length > 0">
    <thead>
      <tr>
        <th>Request Date</th>
        <th>Delivery Date</th>
        <th>Total Price</th>
        <th>Status</th>
        <th>Options</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let order of orderList; let i = index">
        <tr (click)="toggleOrderDetails(i)">
          <td>{{ order.requestDate | date:'short' }}</td>
          <td>{{ order.deliveryDate | date:'short' }}</td>
          <td>{{ order.totalPrice | currency }}</td>
          <td>{{ order.status }}</td>
          <td>
            <button class="button is-primary w-12" [disabled]="order.status !== OrderStatus.WAITING"
              (click)="takeOrder(order.id!!); $event.stopPropagation()">
              Take
            </button>
          </td>
        </tr>
        <tr *ngIf="isOrderDetailsVisible(i)">
          <td colspan="4">
            <div class="pl-4">
              <table class="table is-fullwidth">
                <thead>
                  <tr>
                    <th>Product Name</th>
                    <th>Description</th>
                    <th>Price per Unit</th>
                    <th>Quantity</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let product of order.products">
                    <td>{{ product.name }}</td>
                    <td>{{ product.description }}</td>
                    <td>{{ product.price | currency }}</td>
                    <td>{{ product.quantity }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
